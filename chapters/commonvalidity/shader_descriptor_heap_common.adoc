// Copyright 2019-2026 The Khronos Group Inc.
//
// SPDX-License-Identifier: CC-BY-4.0

// Common Valid Usage
// Common to shader creation and pipeline shader stage creation when descriptor heap is available
ifdef::VK_EXT_descriptor_heap[]
  * [[VUID-{refpage}-descriptorHeap-11314]]
    If the <<features-descriptorHeap,pname:descriptorHeap>> feature is not
    enabled,
    slink:VkShaderDescriptorSetAndBindingMappingInfoEXT::pname:mappingCount
    must: be 0
  * [[VUID-{refpage}-pNext-11315]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_PUSH_DATA_EXT,
ifdef::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_SHADER_RECORD_DATA_EXT,
endif::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    or ename:VK_DESCRIPTOR_MAPPING_SOURCE_RESOURCE_HEAP_DATA_EXT, the mapped
    resource in the shader must: be a variable with a structure type
    decorated with code:Block in the code:Uniform {StorageClass}
  * [[VUID-{refpage}-pNext-11316]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_PUSH_DATA_EXT, the mapped structure
    must: not be larger than the sum of pname:pushDataOffset used in the
    mapping and <<limits-maxPushDataSize,pname:maxPushDataSize>>
ifdef::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
  * [[VUID-{refpage}-pNext-11317]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_SHADER_RECORD_DATA_EXT, the sum of
    mapped structure size and pname:shaderRecordDataOffset used in the
    mapping must: not be larger than
    <<limits-maxShaderGroupStride,pname:maxShaderGroupStride>>
endif::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
  * [[VUID-{refpage}-pNext-11318]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
ifdef::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_SHADER_RECORD_ADDRESS_EXT or
endif::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_PUSH_ADDRESS_EXT, the mapped resource
    in the shader must: be one of:
  ** A variable with a structure type decorated with code:Block in the
     code:Uniform {StorageClass}
  ** A variable with a structure type decorated with code:BufferBlock in the
     code:Uniform {StorageClass}
  ** A variable with a structure type decorated with code:Block in the
     code:StorageBuffer {StorageClass}
ifdef::VK_KHR_acceleration_structure[]
  ** A code:OpTypeAccelerationStructureKHR variable
endif::VK_KHR_acceleration_structure[]
ifdef::VK_NV_ray_tracing[]
  ** A code:OpTypeAccelerationStructureNV variable
endif::VK_NV_ray_tracing[]
  * [[VUID-{refpage}-pNext-11378]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_PUSH_ADDRESS_EXT,
ifdef::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_SHADER_RECORD_ADDRESS_EXT,
endif::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    or ename:VK_DESCRIPTOR_MAPPING_SOURCE_INDIRECT_ADDRESS_EXT, the
    code:OpArrayLength instruction must: not be used on that resource
  * [[VUID-{refpage}-pNext-11399]]
    If the pname:pNext chain specifies a <<descriptorheaps-bindings,
    descriptor mapping>> using
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_HEAP_WITH_CONSTANT_OFFSET_EXT,
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_HEAP_WITH_PUSH_INDEX_EXT,
ifdef::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_HEAP_WITH_SHADER_RECORD_INDEX_EXT,
endif::VK_KHR_ray_tracing_pipeline,VK_NV_ray_tracing[]
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_HEAP_WITH_INDIRECT_INDEX_EXT, or
    ename:VK_DESCRIPTOR_MAPPING_SOURCE_HEAP_WITH_INDIRECT_INDEX_ARRAY_EXT,
    and the mapped resource declaration is an array, the
    pname:pEmbeddedSampler member of the corresponding mapping structure
    must: be `NULL`
endif::VK_EXT_descriptor_heap[]

// Common Valid Usage
