// Copyright 2023-2024 The Khronos Group Inc.
//
// SPDX-License-Identifier: CC-BY-4.0

// Common Valid Usage
// Common to vk*Copy* commands that have image as source and/or destination.
// This relies on an additional attribute {imageparam} set by the command
// which includes this file, specifying the name of the source or
// destination image.
// Additionally, it relies on the {imagesubresource} attribute to specify the
// field in pRegions corresponding to {imageparam}

ifndef::VK_VERSION_1_1,VK_KHR_sampler_ycbcr_conversion[]
  * [[VUID-{refpage}-{imageparam}-97965]]
    If pname:{imageparam} is non-sparse then it must: be bound completely
    and contiguously to a single sname:VkDeviceMemory object
endif::VK_VERSION_1_1,VK_KHR_sampler_ycbcr_conversion[]
ifdef::VK_VERSION_1_1,VK_KHR_sampler_ycbcr_conversion[]
  * [[VUID-{refpage}-{imageparam}-97966]]
    If pname:{imageparam} is non-sparse then the image or the specified
    _disjoint_ plane must: be bound completely and contiguously to a single
    sname:VkDeviceMemory object
endif::VK_VERSION_1_1,VK_KHR_sampler_ycbcr_conversion[]
  * codified-vu
    for region in pRegions:
      require(region.macro(imagesubresource).mipLevel < macro(imageparam).create_info().mipLevels)
  * [[VUID-{refpage}-{imagesubresource}-97968]]
    codified-vu
    # Comment line
    for region in pRegions:
      layerCount = region.macro(imagesubresource).layerCount
      if not is_feature_enabled(maintenance5) or layerCount != VK_REMAINING_ARRAY_LAYERS:
        # Other comment line
        require(layerCount < macro(imageparam).create_info().arrayLayers)
ifdef::VK_EXT_fragment_density_map[]
  * [[VUID-{refpage}-{imageparam}-97969]]
    codified-vu
    imageFlags = macro(imageparam).create_info().flags
    require(not imageFlags.has_bit(VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT))
endif::VK_EXT_fragment_density_map[]
// Common Valid Usage
